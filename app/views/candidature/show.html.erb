<!-- app/views/candidatures/show.html.erb -->

<h1>Candidature Details</h1>

<p><strong>Title:</strong> <%= @candidature.content %></p>
<p><strong>Status:</strong> <%= @candidature.status %></p>

<!-- Display documents if there are any -->
<div class="container_claim">
  <strong><h4>Ma liste des documents</h4></strong>
  <div class="d-flex flex-column gap-4 m-3">
    <% @documents.each do |document| %>
      <div class="row info-container">
        <div class="col-12 text-center">
          <strong><%= document.name %></strong>
        </div>
        <div class="col-12 d-flex justify-content-around">
          <% if document.photo.attached? %>

            <%= link_to url_for(document.photo), target: "_blank" do %>
              <i class="fa-regular fa-eye"></i>
            <% end %>
            <%= link_to rails_blob_url(document.photo, disposition: 'attachment') do %>
              <i class="fas fa-download"></i>
            <% end %>
              <div class="icone_supprimer_document">
              <%= link_to document_path(document), data: { turbo_method: :delete, turbo_confirm: "Etes-vous sÃ»r de vouloir supprimer ce document?" } do %>
                <i class="fa-regular fa-circle-xmark icon-red"></i>
              <% end %>
              </div>

          <% else %>
            <span class="text-muted">Aucun fichier disponible</span>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>

<%# <p><%= link_to 'Edit', edit_candidature_path(@candidature) %></p> %>
<p><%= link_to 'Back to Candidatures', candidatures_path %></p>
<%= console %>
